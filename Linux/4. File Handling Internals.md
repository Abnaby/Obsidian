### Notes 
* Each partition handled by File System
* But file system not handle the storage device 
* inode doesn't have the file name or file path (handled by dentry )
* meta-data stored in "inode" structure 
* Numbers of inode == number of files/directory
* directory are special type of files (treated with same way)
* Inode numbers are unique per file system 
* **Hard disk full usage when** 
	- Disk space 100% 
	- maximum usage of inodes 
		- by creating a lot of files every one of them has dentry pointed to inode 
		- in that case disk space 0% but we cant create any files again.
		- `df -i` --> to show file system inode usage
### File System
#### File System Meta-Data
- Helper data
- File system maintain it to mange these files 
- have a pointer to contents of *File System Data* 
- Consist of Records (Each Record have)
	- inode (index node) (Consist of )
		- inode # (like id)
		- File size 
		- Owner (user & group)
		- Date of Creation
		- Date of Mod
		- Pointers to Data Blocks
#### File System Data 
- Real Contents of Data
- multiple data blocks 
	- may be one data block 
	- or multiple data blocks (Fragmented)
### inode structure
![[Pasted image 20240905152751.png]]
### dentry
* for each file/ Directory must know 
	* dentry 
	* inode number 
	* data block 
- Example 
![[Pasted image 20240905153817.png]]
### Commands 
#### show files with showing inode number 
```bash
ls -i # list with showing inode#
```
- Output 
![[Pasted image 20240905154243.png]]
#### show files status info 
```bash
stat <fileName>
```
- Output 
#### show file system disk space usage  
```bash
df
```
- Options
`-i` to show file system inode usage 
### From aspect of inode 
- Renaming files  
	- by change it from dentry
	- inode number doesn't change
- Moving file (In same filesystem)
	- Delete dentry 
	- make new dentry 
	- make the new dentry point to the inode 
	- inode number doesn't change (cause it is in same file system)
- Moving files (in different file systems)
	- Delete it from fs1 
	- move it totally to fs2 
### Types of Links
#### Hard Link 
- Not including the file name and path of inode 
- all links have same inode 
- Hard Link 
	- not a new file 
	- same file content 
	- same inode 
	- just additional `dentry` with different file name and path but with the same inode#
- Usage 
	- when we need same file with two names or two locations (shortcut)
* Problems
	* not very common 
	* applicable for files not directories 
		* cause it may cause the infinite loop of links which result in system fault 
	* Doesn't work across file systems 
		* we just link the inode# it is unique through the file system 
* Advantage 
	* Space efficient 
-  Create Hard Link
```bash
ln <file to link to> <link name & location> # like cp command
	#  Original  link destenation 
ln file.log ~/log-files/a.log 
```
![[Pasted image 20240905170324.png]]
* to delete file contents 
	* Must remove all dentaries 
	![[Pasted image 20240905170501.png]]
* Example 
	* home and usr must be in same file system
![[Pasted image 20240905161109.png]]

#### Symbolic Links 
- Introduced to fix problem of hard links 
- is not just dentry it is a file with inode structure
- links have different inodes 
- in inode 
	- set `mode` to `l` for symbolic link
- Two implementation types 
	- Slow Symbolic Link
	- Fast Symbolic Link 
		- No need to read data block "path" exists in inode 
		- Not possible if the path is too long to fit in inode structure 
- symbolic links like shortcuts in windows
- u can have symbolic link to file or folder 
- Advantage 
	- Speed Efficient 
-  Create Hard Link
```bash
ln -S <file to link to> <link name & location> # like cp command
#     Original  link destenation 
ln -S ~/file.log ~/log-files/a.log 
```
![[Pasted image 20240905171136.png]]
   **Important Note**
    Always use absolute paths for a *file to link to*  when creating symbolic link (Never use relative links)
* to delete file contents (see image below)
	* `rm ~a/log` --> will delete symbolic links
	* `rm /usr/shared/results.log` --> remove the content and all symbolic link be ==broken links==
	* يعني اللينك شايف الفايل بس الفايل مش شايف اللينك 
	![[Pasted image 20240905171431.png]]
- Example
	- usr and home may be in same of different file system
	- Symbolic Link
		- file content contain `/usr/shared/result.log` 
![[Pasted image 20240905161543.png]]
- Fast Symbolic Link
	- Exist field in Inode will content the `/usr/shared/result.log` 
	![[Pasted image 20240905161809.png]]
### Links notes 
- By default new directories have default 2 hard links 
	- `.` dot link --> for current directory 
	- `..` dot dot link --> for parent directory 
	![[Pasted image 20240905172540.png]]
	* for each child directory increase number of parent links by 1
	For this 
	![[Pasted image 20240905173003.png]]
	Number of links be 4 (1 for childTestDit and 1 for child2TestDit)
	